# 02｜环境配置与数据准备

这一章我们来搭建实验环境，就像准备做菜前要先准备好厨房和食材一样！

## 🐍 Python环境准备

### 检查Python版本
首先确认你的Python版本：
```bash
python --version
# 或者
python3 --version
```
需要Python 3.8或更高版本。如果版本太低，请先升级Python。

### 安装必要的库
我们需要安装一些Python库，就像准备做菜的工具：

```bash
# 推荐：先创建虚拟环境（可选但建议）
python3 -m venv .venv
source .venv/bin/activate  # Windows用户: .venv\Scripts\activate

# 安装必要的库
pip install numpy pandas scikit-learn matplotlib seaborn joblib scipy
```

### 各个库的作用（了解即可）
- **numpy**：数值计算的基础
- **pandas**：处理表格数据（像Excel但更强大）
- **scikit-learn**：机器学习算法库
- **matplotlib/seaborn**：画图工具
- **joblib**：保存和加载模型
- **scipy**：科学计算工具

## 📁 数据文件准备

### 数据文件位置
确保你的项目文件夹中有以下数据文件：
```
项目根目录/
├── data/
│   └── raw/
│       ├── trans_1.csv  # 第一台变压器的数据
│       └── trans_2.csv  # 第二台变压器的数据
```

> 💡 **找不到数据文件？**  
> 如果你是从课程获得的项目，数据文件应该已经包含在内。如果没有，请联系老师或助教获取。

## 🚀 第一次运行测试

让我们运行一个完整的实验来测试环境是否正常：

```bash
# 在项目根目录下运行
python scripts/run_pipeline.py
```

### 这个命令会做什么？
1. **复制数据**：把原始数据复制到工作目录
2. **数据预处理**：把数据整理成模型需要的格式
3. **训练模型**：训练几个不同的机器学习模型
4. **生成图表**：创建各种分析图表
5. **保存结果**：把所有结果保存到文件夹中

### 运行成功的标志
如果一切正常，你会看到：
- 控制台输出各种进度信息
- 创建了一个新文件夹：`artifacts/run_YYYYMMDD_HHMMSS/`
- 文件夹里有很多图片和数据文件

## 📊 查看运行结果

运行完成后，进入结果文件夹（类似 `artifacts/run_20241008_200030/`），你会看到：

### 重要文件
- **final_model_comparison.csv**：所有模型的性能对比表
- **model_performance_analysis.png**：模型性能对比图
- **prediction_examples.png**：预测效果示例图
- **error_distribution.png**：误差分布图

### 其他文件
- **各种.pkl文件**：训练好的模型和数据处理器
- **Transformer相关图片**：数据探索的可视化结果

## ❗ 常见问题解决

### 问题1：找不到数据文件
**错误信息**：`FileNotFoundError: data/raw/trans_1.csv`
**解决方法**：确认数据文件在正确位置，或联系老师获取数据

### 问题2：库安装失败
**错误信息**：`ModuleNotFoundError: No module named 'xxx'`
**解决方法**：重新运行安装命令，确保网络连接正常

### 问题3：图片显示乱码
**现象**：生成的图片中文字显示为方块
**解决方法**：这不影响实验结果，可以忽略或联系助教解决

### 问题4：权限错误
**错误信息**：`PermissionError`
**解决方法**：确保在项目根目录运行命令，检查文件夹权限

## 🎓 完成检查清单

在进入下一章之前，确认你已经：
- [ ] 安装了Python 3.8+和所有必要的库
- [ ] 数据文件在正确位置
- [ ] 成功运行了 `python scripts/run_pipeline.py`
- [ ] 生成了结果文件夹和各种图表文件

恭喜！环境搭建完成，让我们进入下一章开始探索数据吧！