# 07｜训练管线与自动化

为了便于教学演示与批量生成结果，项目提供了可一键运行的管线脚本：`scripts/run_pipeline.py`。

## 一键运行
```bash
python scripts/run_pipeline.py
```

脚本流程：
1. 解析项目根路径，创建产出目录 `artifacts/run_YYYYMMDD_HHMMSS/`。
2. 复制原始数据至产出目录，确保相对路径一致。
3. 运行预处理，生成 `X/y` 与 `scaler` 文件。
4. 训练传统 ML（简化版），产出 `simple_ml_results.csv` 与模型文件。
5. 将结果转为 `final_model_comparison.csv`。
6. 生成评估与探索性可视化图表。

控制台会打印当前工作目录与各阶段状态，便于排错与记录日志。

## 产出物清单（示例）
- `final_model_comparison.csv`：模型性能总表。
- `model_performance_analysis.png`：R²/RMSE 热力图、分组柱状对比、复杂度-性能散点。
- `prediction_examples.png`：预测 vs 实际散点（含 R²/RMSE 注释）。
- `error_distribution.png`：误差直方图与 Q-Q 图。
- `Transformer *_*.png`：原始数据的时间序列、直方、相关性与小时画像。
- `lr_*.pkl`、`ridge_*.pkl`、`rf_*.pkl`、`scaler_*.pkl`：模型与标准化器。

## 课堂建议
- 让学生在自己的环境分别运行两次，比较不同 `run_*` 目录中的结果变化并定位差异来源（随机子采样、超参等）。
- 要求学生将完整流程截图/命令与产出目录结构纳入实验报告。

完成本章后，你能够熟练使用管线脚本复现实验、管理产物与进行课堂演示。