# 完整课堂讲义

这份讲义是为课堂教学设计的，老师可以按照这个步骤带领学生完成整个实验。

## 🎯 课程目标
通过这节课，学生将：
- 了解变压器油温预测的实际意义
- 学会处理时间序列数据
- 训练和比较不同的机器学习模型
- 学会分析和解读实验结果

## ⏰ 课程时间安排（建议90分钟）
- **环境检查**：10分钟
- **数据探索**：15分钟  
- **一键实验**：20分钟
- **结果分析**：20分钟
- **深入理解**：15分钟
- **总结讨论**：10分钟

---

## 📋 课前准备（老师和学生都要做）

### 学生准备
- 安装Python 3.8+
- 下载项目代码和数据
- 安装必要的库：
```bash
pip install numpy pandas scikit-learn matplotlib seaborn joblib scipy
```

### 老师准备
- 准备演示环境
- 确认所有脚本能正常运行
- 准备讲解用的PPT或白板

---

## 🚀 课堂实操步骤

### Step 1：环境检查（10分钟）

**老师操作**：
```bash
# 检查Python版本
python --version

# 检查项目结构
ls -la
ls data/raw/
```

**学生跟做**：确认自己的环境正常

**检查点**：
- [ ] Python版本正确
- [ ] 数据文件存在
- [ ] 能看到项目文件结构

**课堂提问**：
- "大家的Python版本都正确吗？"
- "数据文件都找到了吗？"

---

### Step 2：快速了解数据（15分钟）

**老师操作**：
```bash
python scripts/exploratory/transformer_analysis.py
```

**解释给学生**：
- "这个脚本会分析我们的数据，生成一些图表"
- "我们有两台变压器的数据，每15分钟记录一次"
- "我们要用负载数据来预测油温"

**生成的图表**：
- 时间序列图：显示数据随时间的变化
- 油温图：显示油温的变化趋势
- 相关性图：显示不同变量之间的关系

**课堂讨论**：
- "从图表中你们看到了什么规律？"
- "负载和油温之间有什么关系？"
- "数据有什么特点？"

---

### Step 3：一键运行完整实验（20分钟）

**老师操作**：
```bash
python scripts/run_pipeline.py
```

**边运行边解释**：
1. **数据预处理**："把数据整理成模型能理解的格式"
2. **模型训练**："训练几种不同的机器学习模型"
3. **结果评估**："看看哪个模型表现最好"
4. **生成图表**："把结果用图表展示出来"

**运行时间**：大约5-10分钟，期间可以讲解理论

**检查点**：
- [ ] 创建了新的结果文件夹
- [ ] 生成了CSV结果文件
- [ ] 生成了各种图表

---

### Step 4：分析实验结果（20分钟）

**查看结果文件夹**：
```bash
ls artifacts/run_*/
```

**重点分析的文件**：

#### 1. 模型性能对比表
```bash
cat artifacts/run_*/final_model_comparison.csv
```

**解释给学生**：
- R²：越接近1越好，表示模型解释了多少数据变化
- RMSE：误差大小，越小越好
- 不同时间跨度的预测难度不同

#### 2. 性能对比图
打开 `model_performance_analysis.png`

**讲解要点**：
- 随机森林通常表现最好
- 预测时间越长，准确度越低
- 不同模型有不同的优缺点

#### 3. 预测示例图
打开 `prediction_examples.png`

**讲解要点**：
- 蓝色是真实值，橙色是预测值
- 看预测值和真实值的贴合程度
- 1小时预测比1天预测更准确

#### 4. 误差分布图
打开 `error_distribution.png`

**讲解要点**：
- 误差的分布情况
- 是否有系统性偏差
- 模型的可靠性如何

---

### Step 5：深入理解（15分钟）

**理论讲解**：

#### 什么是滑动窗口？
```
时间: t1  t2  t3  t4  t5  t6  t7  t8
数据: [负载数据...] → 预测t8的油温
```

#### 为什么要预测不同时间跨度？
- **1小时**：运行调度，及时调整
- **1天**：维护计划，负载安排  
- **1周**：长期规划，设备管理

#### 模型比较
- **线性回归**：简单，可解释性强
- **随机森林**：复杂，通常更准确
- **神经网络**：最复杂，需要更多数据

**课堂讨论**：
- "为什么随机森林表现更好？"
- "什么情况下会选择简单模型？"
- "如何改进预测效果？"

---

### Step 6：扩展实验（可选，10分钟）

如果时间充足，可以尝试：

**修改参数**：
```bash
# 编辑预处理脚本，修改lookback参数
# 重新运行实验，比较结果
```

**尝试其他模型**：
```bash
python scripts/models/simple_deep_models.py
```

---

## 📝 课堂总结（10分钟）

### 学到了什么？
1. **数据处理**：如何把时间序列数据变成机器学习样本
2. **模型训练**：如何训练和比较不同模型
3. **结果分析**：如何解读模型性能和预测结果
4. **实际应用**：机器学习在工业中的应用

### 关键概念回顾
- **滑动窗口**：用历史数据预测未来
- **R²和RMSE**：评估模型好坏的指标
- **时间跨度**：预测越远越困难
- **模型选择**：简单vs复杂的权衡

### 课后作业
1. 完成实验报告（参考示例报告）
2. 尝试修改参数，观察结果变化
3. 思考如何改进预测效果

---

## 🔧 常见问题处理

### 技术问题
- **环境问题**：检查Python版本和库安装
- **数据问题**：确认数据文件位置
- **运行错误**：检查当前目录和权限

### 理解问题
- **概念不清**：用类比和实例解释
- **结果困惑**：重点解释R²和RMSE的含义
- **应用疑问**：结合实际工业场景说明

---

## 📊 评估标准

### 课堂参与（30%）
- 积极提问和讨论
- 能跟上实操步骤
- 理解基本概念

### 实验完成（40%）
- 成功运行所有脚本
- 生成完整结果
- 能解读基本图表

### 报告质量（30%）
- 结构清晰
- 结果分析合理
- 有自己的思考

---

## 💡 教学建议

### 对于初学者
- 多用类比和实例
- 重点解释概念，少讲技术细节
- 鼓励提问和讨论

### 对于有基础的学生
- 可以深入讲解算法原理
- 鼓励尝试参数调整
- 讨论改进方案

### 时间控制
- 预留充足的实操时间
- 重要概念要反复强调
- 适当调整讲解深度

这份讲义设计为90分钟的课堂教学，老师可以根据实际情况调整内容和时间分配。重点是让学生理解整个机器学习项目的流程，而不是纠结于技术细节。